
RCS file: piki.py,v
Working file: piki.py
head: 1.57
branch:
locks: strict
access list:
symbolic names:
keyword substitution: kv
total revisions: 57;	selected revisions: 57
description:
----------------------------
revision 1.57
date: 1999/08/19 05:31:46;  author: martinp;  state: Exp;  lines: +4 -2
 * Make the UploadFile label a link.
----------------------------
revision 1.56
date: 1999/08/19 05:00:44;  author: martinp;  state: Exp;  lines: +12 -3
 * Add GoTo macro to find page.
----------------------------
revision 1.55
date: 1999/08/19 04:33:38;  author: martinp;  state: Exp;  lines: +3 -3
 * Logo should link to RecentChanges.

 * New cool logo from JohnFarrell.
----------------------------
revision 1.54
date: 1999/08/17 00:57:08;  author: martinp;  state: Exp;  lines: +4 -4
 * Pages should only be listed once in RecentChanges, not once for
   each day they changed.
----------------------------
revision 1.53
date: 1999/08/16 07:02:46;  author: martinp;  state: Exp;  lines: +2 -2
 * Experiment with the questionmark before an undefined word so that
   it looks less like English syntax.
----------------------------
revision 1.52
date: 1999/08/13 02:07:38;  author: martinp;  state: Exp;  lines: +2 -2
 * Try to improve the URL regexp heuristic.
----------------------------
revision 1.51
date: 1999/08/12 23:22:24;  author: martinp;  state: Exp;  lines: +18 -33
 * Replace search form by a soft page with macros.

 * Supply default in search fields when invoked from a page footer.
----------------------------
revision 1.50
date: 1999/08/12 11:55:48;  author: martinp;  state: Exp;  lines: +70 -51
 * Implement WordIndex, TitleIndex, TitleSearch and FullSearch as
   macros, rather than as magic pages.  Auto-suggestion for the search
   fields is not working yet.
----------------------------
revision 1.49
date: 1999/08/12 11:25:43;  author: martinp;  state: Exp;  lines: +12 -9
 * Put a logo in the title.

 * Add a stubbed-out image-upload field.
----------------------------
revision 1.48
date: 1999/08/12 11:12:29;  author: martinp;  state: Exp;  lines: +10 -6
 * Tidy-up sort of search results
----------------------------
revision 1.47
date: 1999/08/12 10:48:22;  author: martinp;  state: Exp;  lines: +2 -2
 * Make the height of the horizontal rule proportional to the number
   of dashes you write to make it.
----------------------------
revision 1.46
date: 1999/08/12 10:45:38;  author: martinp;  state: Exp;  lines: +16 -11
 * Fix formatting of titles.

 * Don't go to "thankyou page" after changes but rather
   return direct to the changed page.
----------------------------
revision 1.45
date: 1999/08/12 10:36:30;  author: martinp;  state: Exp;  lines: +13 -10
 * Also count number of hits and pages searched in title
   search.
----------------------------
revision 1.44
date: 1999/08/12 10:30:37;  author: martinp;  state: Exp;  lines: +15 -10
 * Show last-modified time in footer more cleanly.
----------------------------
revision 1.43
date: 1999/08/12 10:24:02;  author: martinp;  state: Exp;  lines: +9 -12
 * Count number of hits and pages searched in full search.

 * Show time at bottom of page.
----------------------------
revision 1.42
date: 1999/08/12 10:15:13;  author: martinp;  state: Exp;  lines: +4 -2
 * Allow including modification time in RecentChanges.
----------------------------
revision 1.41
date: 1999/08/12 02:12:16;  author: martinp;  state: Exp;  lines: +1 -2
 * Oops.  All rights reversed.
----------------------------
revision 1.40
date: 1999/08/12 02:12:01;  author: martinp;  state: Exp;  lines: +16 -1
 * Add GPL.
----------------------------
revision 1.39
date: 1999/08/10 07:23:51;  author: martinp;  state: Exp;  lines: +9 -2
 * Optionally hide hostnames in RecentChanges.  Also, when looking up
   hostnames cope if one lookup should happen to fail.
----------------------------
revision 1.38
date: 1999/08/10 05:21:49;  author: martinp;  state: Exp;  lines: +3 -2
 * Expand tabs in raw text before formatting.
----------------------------
revision 1.37
date: 1999/08/10 05:05:42;  author: martinp;  state: Exp;  lines: +4 -4
 * Fix letter shortcuts in WordIndex and FullIndex.
----------------------------
revision 1.36
date: 1999/08/10 05:01:15;  author: martinp;  state: Exp;  lines: +11 -13
 * Better indent/undent algorithm that copes with going back
   several levels in one step

 * Better handling of CrLfBrainDamage in output formatting.
----------------------------
revision 1.35
date: 1999/08/10 04:49:28;  author: martinp;  state: Exp;  lines: +7 -5
 * Allow logo to be configured off.

 * Don't falsely match words like doEditToDo
----------------------------
revision 1.34
date: 1999/08/10 04:17:35;  author: martinp;  state: Exp;  lines: +4 -3
 * Add copyright notice.
----------------------------
revision 1.33
date: 1999/08/10 04:10:07;  author: martinp;  state: Exp;  lines: +43 -26
 * Fix up to work on NT.  (Oh, chunder!)

 * Add RecentChanges to search page.

 * EditingTips should be a soft link.

 * undent before horizontal rules.
----------------------------
revision 1.32
date: 1999/08/09 14:28:20;  author: mbp;  state: Exp;  lines: +8 -2
 * Clean up presentation of full search results, and sort by number of
   hits.
----------------------------
revision 1.31
date: 1999/08/09 14:25:36;  author: mbp;  state: Exp;  lines: +11 -13
 * Cleanup indentation formatting code.
----------------------------
revision 1.30
date: 1999/08/09 14:14:53;  author: mbp;  state: Exp;  lines: +21 -4
 * Print hyperlinked alphabet at the start of index pages.
----------------------------
revision 1.29
date: 1999/08/09 14:04:40;  author: mbp;  state: Exp;  lines: +10 -5
 * Link to indexes from search page.

 * Permuted index would be better called WordIndex.
----------------------------
revision 1.28
date: 1999/08/09 14:00:25;  author: mbp;  state: Exp;  lines: +35 -8
 * Add simple PermutedIndex implementation.
----------------------------
revision 1.27
date: 1999/08/09 13:49:52;  author: mbp;  state: Exp;  lines: +5 -6
 * Clean up presentation of footer and full index.
----------------------------
revision 1.26
date: 1999/08/09 13:45:48;  author: mbp;  state: Exp;  lines: +7 -5
 * Cosmetics.
----------------------------
revision 1.25
date: 1999/08/09 13:44:27;  author: mbp;  state: Exp;  lines: +51 -25
 * RecentChanges are now shown most-recent-first, and duplicates
   are removed.

 * Titles act as reverse-links.

 * Edit field now wraps input.
----------------------------
revision 1.24
date: 1999/08/09 12:33:28;  author: mbp;  state: Exp;  lines: +5 -11
 * Factor out try_getenv
----------------------------
revision 1.23
date: 1999/08/09 12:30:05;  author: mbp;  state: Exp;  lines: +4 -2
 * Close off <pre> before footer

 * Fix formatting in RecentChanges
----------------------------
revision 1.22
date: 1999/08/08 14:06:59;  author: mbp;  state: Exp;  lines: +24 -11
 * Handle {{{ preformatted text }}}
----------------------------
revision 1.21
date: 1999/08/08 13:58:56;  author: mbp;  state: Exp;  lines: +4 -8
 * Use standard date format in page footers.

 * Cleanup os.environ
----------------------------
revision 1.20
date: 1999/08/08 13:56:18;  author: mbp;  state: Exp;  lines: +30 -9
 * Add FullIndex feature

 * RecentChanges are now grouped together by day: we need now just
   eliminate duplicates.
----------------------------
revision 1.19
date: 1999/08/08 13:38:23;  author: mbp;  state: Exp;  lines: +17 -2
 * Show undefined topics as links with questionmarks.

 * Fix bug in showing an undefined topic that would cause a crash when
   trying to read the text file.
----------------------------
revision 1.18
date: 1999/08/08 13:32:14;  author: mbp;  state: Exp;  lines: +14 -19
PageFormatter:

 * Tidy up entity handling

 * Handle blank lines in the middle of indented sections; and
   continuation paragraphs in lists.
----------------------------
revision 1.17
date: 1999/08/08 13:26:09;  author: mbp;  state: Exp;  lines: +30 -2
 * Improve PageFormatter to understand indents and bullet lists.
----------------------------
revision 1.16
date: 1999/08/08 12:51:13;  author: mbp;  state: Exp;  lines: +10 -2
 * Show last-modified time on pages.
----------------------------
revision 1.15
date: 1999/08/08 12:40:59;  author: mbp;  state: Exp;  lines: +39 -20
 * Clean up PageFormatter to look up rules by name, rather than
   hardcoding them.

 * PageFormatter can now also handle horizontal rules, email addresses
   and URLs.
----------------------------
revision 1.14
date: 1999/08/08 11:16:04;  author: mbp;  state: Exp;  lines: +5 -4
 * Show hostnames in RecentChanges.
----------------------------
revision 1.13
date: 1999/08/08 11:00:40;  author: mbp;  state: Exp;  lines: +64 -40
 * Move formatting code to a PageFormatter class, and implement bold
   and emphasis codes.
----------------------------
revision 1.12
date: 1999/08/08 02:27:38;  author: mbp;  state: Exp;  lines: +5 -6
 * Test and fix under Apache.
----------------------------
revision 1.11
date: 1999/08/08 02:05:45;  author: mbp;  state: Exp;  lines: +54 -18
 * Early in the script redirect stderr to a logfile.

 * Implement a crude RecentChanges from the editlog.
----------------------------
revision 1.10
date: 1999/08/08 01:42:24;  author: mbp;  state: Exp;  lines: +25 -12
 * Write an entry to the editlog when pages are edited so that we can
   later work out RecentChanges.
----------------------------
revision 1.9
date: 1999/08/08 01:20:01;  author: mbp;  state: Exp;  lines: +55 -23
 * Implement simple editing.
----------------------------
revision 1.8
date: 1999/08/07 10:11:16;  author: mbp;  state: Exp;  lines: +37 -23
 * Implement full-text search.
----------------------------
revision 1.7
date: 1999/08/06 13:26:49;  author: mbp;  state: Exp;  lines: +103 -24
 * Parse URL parameters by regular expressions, not using the cgi
   module.  Cleaner means for responding to commands.

 * Supply search form on request.

 * Implement a simple title search mechanism.

 * Escape entities in HTML output.
----------------------------
revision 1.6
date: 1999/08/06 11:34:34;  author: mbp;  state: Exp;  lines: +20 -7
 * Don't fail if the page doesn't exist yet.
----------------------------
revision 1.5
date: 1999/08/06 09:54:30;  author: mbp;  state: Exp;  lines: +9 -3
Formatting for blank lines.
----------------------------
revision 1.4
date: 1999/08/06 09:50:44;  author: mbp;  state: Exp;  lines: +52 -36
* Move towards properly formatting a page when it is send back.

* Make WikiWords into hyperlinks.
----------------------------
revision 1.3
date: 1999/08/05 10:22:02;  author: mbp;  state: Exp;  lines: +14 -10
Split page titles using a regexp rather than iterating through the
string.
----------------------------
revision 1.2
date: 1999/08/04 14:51:42;  author: mbp;  state: Exp;  lines: +46 -7
Simple implementation of sending down page bodies, including a title
and footer
----------------------------
revision 1.1
date: 1999/08/04 14:40:40;  author: mbp;  state: Exp;
Initial revision
=============================================================================
